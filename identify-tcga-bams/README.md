# Exploratory CDA notebook
Here, we wish to utilize CDA to generate an equivalent GDC manifest for file download. Specifically, we have a manifest generated by selecting BAMs from the TCGA melanoma study. This has resulted in 1,881 bam files that consist of, 
- Whole-exome sequencing (WES): 944
- RNA-sequencing: 472
- miRNA-sequencing: 452
- ATAC-seq: 13

Overall, I spent about 3 hours on this whole exercise: working through this exploratory notebook, writing up the cleaner generate-TCGA-manifest notebook, and writing down some reflections. Originally, I set out to identify TCGA individuals, samples, and files for individuals that have both RNA-seq and WES-seq. There were three time sinks in particular that I think took most of my time, 
1. When combining queries, there is nothing that prevents you from combining queries across...types? In the first section of this notebook, I tried to combine two queries with an AND statement that were incompatible as one was querying on research subjects and the other was on files. In retrospect, this makes total sense since the two statements are looking at two different tables. The spirit of the query though was, "Please return bams for this TCGA cohort". I am not initiated enough into how to properly think about these things, but I do think that this will be a common type of query performed. Perhaps this is just an example to illustrate in the documentation, rather than make any programatic changes. 

2. It would be _really nice_ if there was some sort of metadata or help text associated with each CDA column and associated unique terms. I could not find anything about this in the documentation so I spent a huge amount of time just looking through columns and their associated unique terms to try to find what I was looking for. This information could either be included in the response or just online in the specification.

3. Not all metadata is captured. Currently, the GDC "experimental strategy" and "platform" seem to not be included whatsoever in CDA. Thus, I am unable to distinguish sequencing modalities for specimen. Here, I do some sleuthing and am able to discern the sequencing modality by looking at the label name and comparing sequencing type counts from what is observed on the GDC website. Especially when starting out, I think that it will be natural for folks to go about using this API as I did -- having the source open in one window, in my case the GDC, and tinkering with the CDA response in another. Trying to match up the information on GDC to what is returned by CDA was quite difficult at times, _especially_ when I was looking for metadata in the CDA response that (seems) to not be here. 

The [exploratory notebook](CDA%20notebook%20exploratory.ipynb) has the following sections,
- Trying to identify bams from the study with combined queries
- Working with just a single query of all research participants within a study
- Creating a GDC manifest file
- Comparing the CDA-generated manifest file to the GDC downloaded one 

With that said, I am _thrilled_ to have a nice function to create GDC manifests relatively easily now. This seems to be reproducible for TCGA-SKCM and I have tried the following other cohorts,
- TCGA-BLCA, I keep receiving a connection error on the initial query
- TCGA-READ, 678 aliquot bams which matches what we see online